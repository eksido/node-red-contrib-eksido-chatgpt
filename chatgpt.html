<script type="text/javascript">
    RED.nodes.registerType("chatgpt", {
      category: "function",
      color: "#a6bbcf",
      defaults: {
        name: { value: "" },
        apiKey: { value: "", required: true },
        maxTokens: { value: 7, required: true },
        numResponses: { value: 1, required: true },
        stopSequences: { value: "\\n" },
        temperature: { value: 0, required: true },
        topP: { value: 1, required: true },
        stream: { value: false, required: true },
        logprobs: { value: "" },
      },
      inputs: 1,
      outputs: 1,
      icon: "file.png",
      label: function () {
        return this.name || "chatgpt";
      },
      oneditprepare: function () {
        const node = this;
        RED.text.bidi.prepareInput($("#node-input-stopSequences"));
      },
    });
  </script>
  
  <script type="text/x-red" data-template-name="chatgpt">
    <div class="form-row">
      <label for="node-input-apiKey">
        <i class="icon-key"></i> API Key
      </label>
      <input type="text" id="node-input-apiKey" placeholder="API Key">
    </div>
    <div class="form-row">
      <label for="node-input-maxTokens">Max tokens</label>
      <input type="number" id="node-input-maxTokens" min="1" placeholder="Max tokens">
    </div>
    <div class="form-row">
      <label for="node-input-numResponses">Num responses</label>
      <input type="number" id="node-input-numResponses" min="1" placeholder="Num responses">
    </div>
    <div class="form-row">
      <label for="node-input-stopSequences">Stop sequences</label>
      <input type="text" id="node-input-stopSequences" placeholder="Stop sequences">
    </div>
    <div class="form-row">
      <label for="node-input-temperature">Temperature</label>
      <input type="number" id="node-input-temperature" step="0.01" min="0" max="1" placeholder="Temperature">
    </div>
    <div class="form-row">
      <label for="node-input-topP">Top P</label>
      <input type="number" id="node-input-topP" step="0.01" min="0" max="1" placeholder="Top P">
    </div>
    <div class="form-row">
      <label for="node-input-stream">Stream</label>
      <input type="checkbox" id="node-input-stream">
    </div>
    <div class="form-row">
      <label for="node-input-logprobs">Logprobs</label>
      <input type="number" id="node-input-logprobs" min="0" placeholder="Logprobs (optional)">
    </div>
    <div class="form-row">
      <label for="node-input-name">
        <i class="icon-tag"></i> Name
      </label>
      <input type="text" id="node-input-name" placeholder="Name">
    </div>
  </script>  